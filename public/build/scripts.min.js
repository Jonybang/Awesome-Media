var scripts=webpackJsonp_name_([0],{0:/*!*************************************!*\
  !*** ./public/frontend-app/main.js ***!
  \*************************************/
function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(/*! ../../~/es6-shim/es6-shim.min */1);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var r=n(/*! ../../~/es6-promise/dist/es6-promise.min */3);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(/*! ../../~/reflect-metadata/Reflect */5);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var a=n(/*! ../../~/zone.js/dist/zone.min */6);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var u=n(/*! ../../~/zone.js/dist/long-stack-trace-zone.min */7);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var s=n(/*! @angular/platform-browser-dynamic */8);n(/*! rxjs */30);var c=n(/*! ./main.module */357);(0,s.platformBrowserDynamic)().bootstrapModule(c.MainModule)},4:/*!***********************!*\
  !*** vertx (ignored) ***!
  \***********************/
function(e,t){},357:/*!********************************************!*\
  !*** ./public/frontend-app/main.module.js ***!
  \********************************************/
function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MainModule=void 0;var o,a,u=n(/*! @angular/platform-browser */28),s=n(/*! @angular/forms */358),c=n(/*! @angular/http */359),l=n(/*! @angular/router */360),d=n(/*! @angular/core */10),f=n(/*! ./helpers/ajax */361),p=n(/*! ./services/media.service */364),v=n(/*! ./components */366),h=n(/*! videogular2/core */382),m=n(/*! videogular2/controls */444),b=(n(/*! videogular2/overlay-play */458),n(/*! @angular2-material/sidenav */460)),y=n(/*! @angular2-material/button */462),g=n(/*! @angular2-material/card */463),_=n(/*! @angular2-material/progress-bar */464),M=n(/*! @angular2-material/input */465),k=n(/*! ./directives/prevent-href.directive.js */466),w=n(/*! ./directives/audio-player.directive.js */467),j=n(/*! ng2-file-upload */370),O=n(/*! ./pipes */470),P=n(/*! ./components/app.routes */472),U=n(/*! ./services/user.service */379),C=n(/*! ./services/socket.service */392),E=n(/*! ../../config */473),L=i(E),S=n(/*! ./directives/media-list.directive */474),A=n(/*! ./broadcasters/load-media */441),I=n(/*! ./broadcasters/broadcaster */442),z=n(/*! ./broadcasters/play-media */443);t.MainModule=(o=(0,d.NgModule)({bootstrap:[v.AppComponent],declarations:[v.AppComponent,v.MediaComponent,v.SidenavComponent,S.MediaList,O.TrimPipe,w.AudioPlayer,k.PreventHref],imports:[u.BrowserModule,h.VgCore,m.VgControlsModule,j.FileUploadModule,b.MdSidenavModule,y.MdButtonModule,g.MdCardModule,_.MdProgressBarModule,M.MdInputModule,s.FormsModule,c.HttpModule,l.RouterModule.forRoot(P.routes,{useHash:!0})],providers:[f.Ajax,p.MediaService,U.UserService,C.SocketService,I.Broadcaster,A.LoadMedia,z.PlayMedia,{provide:"AppConfig",useValue:L.data}]}),o(a=function x(){r(this,x)})||a)},361:/*!*********************************************!*\
  !*** ./public/frontend-app/helpers/ajax.js ***!
  \*********************************************/
function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Ajax=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(/*! @angular/http */359);n(/*! @angular/core */10);n(/*! rxjs/add/operator/toPromise */329);var u=n(/*! lodash */362),s=i(u),c=t.Ajax=function(){function e(t){r(this,e),this.http=t}return o(e,[{key:"get",value:function(e,t){var n=new a.URLSearchParams;return t&&s.forEach(t,function(e,t){s.isNil(e)||s.isString(e)&&!e||s.isArray(e)&&!e.length||n.set(t,e)}),this.ajax("get",e,{search:n})}},{key:"post",value:function(e,t){return this.ajax("post",e,t)}},{key:"put",value:function(e,t){return this.ajax("put",e,t)}},{key:"delete",value:function(e){return this.ajax("delete",e)}},{key:"ajax",value:function(e,t,n){var i=new a.RequestOptions;if(i.method=e,"post"==e||"update"==e){s.isObject(n)&&(n=JSON.stringify(n));var r=new a.Headers;r.append("Content-Type","application/json"),i.headers=r}return this.http[e](t,n,i).toPromise().then(function(e){return e?e.json():null})}}]),e}();Reflect.defineMetadata("design:paramtypes",[a.Http],c)},364:/*!*******************************************************!*\
  !*** ./public/frontend-app/services/media.service.js ***!
  \*******************************************************/
function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaService=void 0;var r,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(/*! ../models/media.model */365),s=n(/*! ../helpers/ajax */361),c=t.MediaService=(o=r=function(){function e(t){i(this,e),this.ajax=t}return a(e,[{key:"query",value:function(t){return this.ajax.get(""+e.API_URL,t).then(function(e){return _.map(e,function(e){return new u.MediaModel(e)})})}}]),e}(),r.API_URL="api/media",o);Reflect.defineMetadata("design:paramtypes",[s.Ajax],c)},365:/*!***************************************************!*\
  !*** ./public/frontend-app/models/media.model.js ***!
  \***************************************************/
function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaModel=void 0;var o=n(/*! lodash */362),a=i(o);t.MediaModel=function u(e){var t=this;r(this,u),this.id=this.id,this.name=this.name,this.src=this.src,this.type=this.type,a.forEach(e,function(e,n){t[n]=e})}},366:/*!*************************************************!*\
  !*** ./public/frontend-app/components/index.js ***!
  \*************************************************/
function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(/*! ./app/app.component */367);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var r=n(/*! ./sidenav/sidenav.component */369);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(/*! ./media/media.component */381);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},367:/*!*************************************************************!*\
  !*** ./public/frontend-app/components/app/app.component.js ***!
  \*************************************************************/
function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.AppComponent=void 0;var o,a,u=n(/*! @angular/core */10),s=n(/*! ./app.template.html */368),c=i(s);t.AppComponent=(o=(0,u.Component)({selector:"fronted-app",template:c["default"]}),o(a=function l(){r(this,l)})||a)},368:/*!**************************************************************!*\
  !*** ./public/frontend-app/components/app/app.template.html ***!
  \**************************************************************/
function(e,t){e.exports='<main class="mdl-layout__content" style="height: 93vh;">\n    <router-outlet></router-outlet>\n</main>\n<footer class="mdl-mini-footer" style="height: 2vh;">\n    <p>Awesome Media <a href="https://github.com/jonybang/Awesome-Media">source code</a>. You can create your own media service.</p>\n</footer>'},369:/*!*********************************************************************!*\
  !*** ./public/frontend-app/components/sidenav/sidenav.component.js ***!
  \*********************************************************************/
function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0}),t.SidenavComponent=void 0;var u,s,c,l,d,f,p,v,h,m,b,y,g,_,M,k,w,j,O,P=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),U=n(/*! @angular/core */10),C=n(/*! @angular/router */360),E=n(/*! ng2-file-upload */370),L=n(/*! ../../helpers/ajax */361),S=(n(/*! ../../models/user.model */378),n(/*! ../../services/user.service */379)),A=n(/*! ./sidenav.template.html */380),I=i(A),z=t.SidenavComponent=(u=(0,U.Component)({selector:"sidenav",template:I["default"]}),s=(0,U.Output)(),c=(0,U.Output)(),l=(0,U.Output)(),d=(0,U.Output)(),f=(0,U.Output)(),p=(0,U.Input)(),v=(0,U.Input)(),h=(0,U.Input)(),u((b=function(){function e(t,n,i,a){o(this,e),r(this,"onVkAuth",y,this),r(this,"onUploadMedia",g,this),r(this,"onSyncAudio",_,this),r(this,"onSaveNewUser",M,this),r(this,"onLogInUser",k,this),r(this,"currentUser",w,this),r(this,"message",j,this),r(this,"allowToCreateFirstUser",O,this),this.uploader=new E.FileUploader({url:"/api/media-upload"}),this.newUser=null,this.logInUser=null,this._route=t,this._ajax=n,this._user_service=i,this._app_config=a}return P(e,[{key:"ngOnInit",value:function(){var e=this;this._route.params.map(function(e){return e.status}).subscribe(function(e){}),this.uploader.onCompleteItem=function(){e.onUploadMedia.next()}}},{key:"saveNewUser",value:function(){this.onSaveNewUser.next(this.newUser)}},{key:"logIn",value:function(){this.onLogInUser.next(this.logInUser)}},{key:"vkAuth",value:function(){var e=this,t=this._app_config.vk_api_options,n=window.open("https://oauth.vk.com/authorize?client_id="+t.app_id+"&display=popup&redirect_uri="+t.redirect_uri+"&scope="+t.scope+"&response_type=code&v=5.53","VK Auth","width=900,height=600");n.onunload=function(){e.onVkAuth.next(),e._user_service.getCurrent(function(t){e.currentUser=t})}}},{key:"syncAudio",value:function(){this.onSyncAudio.next()}}]),e}(),y=a(b.prototype,"onVkAuth",[s],{enumerable:!0,initializer:function(){return new U.EventEmitter}}),g=a(b.prototype,"onUploadMedia",[c],{enumerable:!0,initializer:function(){return new U.EventEmitter}}),_=a(b.prototype,"onSyncAudio",[l],{enumerable:!0,initializer:function(){return new U.EventEmitter}}),M=a(b.prototype,"onSaveNewUser",[d],{enumerable:!0,initializer:function(){return new U.EventEmitter}}),k=a(b.prototype,"onLogInUser",[f],{enumerable:!0,initializer:function(){return new U.EventEmitter}}),w=a(b.prototype,"currentUser",[p],{enumerable:!0,initializer:function(){return this.currentUser}}),j=a(b.prototype,"message",[v],{enumerable:!0,initializer:function(){return this.message}}),O=a(b.prototype,"allowToCreateFirstUser",[h],{enumerable:!0,initializer:function(){return this.allowToCreateFirstUser}}),m=b))||m);(0,U.Inject)("AppConfig")(z,null,3),Reflect.defineMetadata("design:paramtypes",[C.ActivatedRoute,L.Ajax,S.UserService,,],z)},378:/*!**************************************************!*\
  !*** ./public/frontend-app/models/user.model.js ***!
  \**************************************************/
function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.UserModel=void 0;var o=n(/*! lodash */362),a=i(o);t.UserModel=function u(e){var t=this;r(this,u),this.login=this.login,this.first_name=this.first_name,this.last_name=this.last_name,this.vk_id=this.vk_id,this.vk=this.vk,a.forEach(e,function(e,n){t[n]=e})}},379:/*!******************************************************!*\
  !*** ./public/frontend-app/services/user.service.js ***!
  \******************************************************/
function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.UserService=void 0;var r,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(/*! ../helpers/ajax */361),s=t.UserService=(o=r=function(){function e(t){i(this,e),this._ajax=t}return a(e,[{key:"getCurrent",value:function(e){var t=this,n=void 0;return this.CurrentUser?e(this.CurrentUser):(n=this.currentPromise?this.currentPromise:this._ajax.get("/api/current_user"),void n.then(function(n){return t.CurrentUser=n,t.currentPromise=null,e(t.CurrentUser)}))}},{key:"list",value:function(){return this._ajax.get("/api/users")}},{key:"create",value:function(e){return this._ajax.post("/api/users",e)}},{key:"auth",value:function(e){return this._ajax.post("/api/auth",e)}}]),e}(),r.CurrentUser=null,r.currentPromise=null,o);Reflect.defineMetadata("design:paramtypes",[u.Ajax],s)},380:/*!**********************************************************************!*\
  !*** ./public/frontend-app/components/sidenav/sidenav.template.html ***!
  \**********************************************************************/
function(e,t){e.exports='<h3>Control panel</h3>\n\n<div *ngIf="currentUser">\n\t<h5>{{currentUser.login}}</h5>\n\n\t<h6>You can manual upload audio:</h6>\n\n\t<div>\n\t\t<input ng2FileSelect [uploader]="uploader" multiple type="file">\n\t\t<br><br>\n\t\t<button color="primary" md-raised-button (click)="uploader.uploadAll()" [disabled]="!uploader.getNotUploadedItems().length">Upload files</button>\n\t\t<br>\n\t\t<md-progress-bar *ngIf="uploader.isUploading" mode="indeterminate"></md-progress-bar>\n\t</div>\n\n\t<h6>Or load your audio from vk:</h6>\n\n\t<button *ngIf="currentUser.vk && currentUser.vk.id" color="accent" md-raised-button (click)="syncAudio()">Sync VK Audio</button>\n\t<button *ngIf="!currentUser.vk || !currentUser.vk.id" md-raised-button (click)="vkAuth()">Bind vk profile</button>\n</div>\n\n<div *ngIf="!currentUser">\n\t<button class="margin-bottom" color="primary" md-raised-button (click)="newUser = {}" *ngIf="allowToCreateFirstUser && !newUser">Manual create first user</button>\n\n\t<md-card *ngIf="newUser" class="margin-bottom">\n\t\t<md-card-subtitle>Manual create first user</md-card-subtitle>\n\t\t<md-card-content>\n\t\t\t<md-input placeholder="Login" [(ngModel)]="newUser.login"></md-input>\n\n\t\t\t<md-input placeholder="Password" type="password" [(ngModel)]="newUser.password"></md-input>\n\t\t</md-card-content>\n\t\t<md-card-actions>\n\t\t\t<button md-raised-button color="warn" (click)="newUser = null">Cancel</button>\n\t\t\t<button md-raised-button color="primary" (click)="saveNewUser()">Save</button>\n\t\t</md-card-actions>\n\t</md-card>\n\t<br>\n\n\t<button class="margin-bottom" color="primary" md-raised-button (click)="logInUser = {}" *ngIf="!allowToCreateFirstUser && !logInUser">Login/password Auth</button>\n\n\t<md-card *ngIf="logInUser" class="margin-bottom">\n\t\t<md-card-subtitle>Login/password Auth</md-card-subtitle>\n\t\t<md-card-content>\n\t\t\t<md-input placeholder="Login" [(ngModel)]="logInUser.login"></md-input>\n\n\t\t\t<md-input placeholder="Password" type="password" [(ngModel)]="logInUser.password"></md-input>\n\t\t</md-card-content>\n\t\t<md-card-actions>\n\t\t\t<button md-raised-button color="warn" (click)="logInUser = null">Cancel</button>\n\t\t\t<button md-raised-button color="primary" (click)="logIn()">Log in</button>\n\t\t</md-card-actions>\n\t</md-card>\n\t<br>\n\n\t<button color="primary" md-raised-button (click)="vkAuth()">VK Auth</button>\n</div>\n\n\n<p>{{message}}</p>'},381:/*!*****************************************************************!*\
  !*** ./public/frontend-app/components/media/media.component.js ***!
  \*****************************************************************/
function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaComponent=void 0;var o,a,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(/*! @angular/core */10),c=(n(/*! @angular/router */360),n(/*! videogular2/core */382),n(/*! ../../services/media.service */364)),l=n(/*! ../../services/user.service */379),d=(n(/*! ../../helpers/ajax */361),n(/*! ../../models/media.model */365),n(/*! ../../models/user.model */378),n(/*! ./media.template.html */391)),f=i(d),p=n(/*! ../../services/socket.service */392),v=n(/*! ../../broadcasters/load-media */441),h=n(/*! ../../broadcasters/play-media */443),m=t.MediaComponent=(o=(0,s.Component)({selector:"media",template:f["default"]}),o(a=function(){function e(t,n,i,o,a){r(this,e),this.mediaList=this.mediaList,this.currentMedia=this.currentMedia,this.currentUser=this.currentUser,this.sideNavMessage="",this._media_service=t,this._user_service=n,this._socket_service=i,this._load_media=o,this._play_media=a,this.zone=new s.NgZone({enableLongStackTrace:!1})}return u(e,[{key:"ngOnInit",value:function(){var e=this;this._user_service.list().then(function(t){e.users=t}),this._user_service.getCurrent(function(t){e.currentUser=t})}},{key:"mediaListLoaded",value:function(e){this.mediaList=e,this.loaded=!0}},{key:"mediaSelected",value:function(e){this.currentMedia=e,this._play_media.fire()}},{key:"nextMedia",value:function(){var e=this.mediaList.indexOf(this.currentMedia);e==this.mediaList.length-1&&(e=-1),this.mediaSelected(this.mediaList[++e])}},{key:"onVkAuth",value:function(){this._load_media.fire()}},{key:"onUploadMedia",value:function(){this._load_media.fire()}},{key:"userError",value:function(e){var t=this;this.zone.run(function(){t.sideNavMessage=_.has(e,"_body")?e._body:e})}},{key:"onSaveNewUser",value:function(e){var t=this;this._user_service.create(e).then(function(e){t.currentUser=e},this.userError.bind(this))}},{key:"onLogInUser",value:function(e){var t=this;this._user_service.auth(e).then(function(e){t.currentUser=e,t._load_media.fire()},this.userError.bind(this))}},{key:"onSyncAudio",value:function(){var e=this,t=this._socket_service.get("vk_audio_sync",function(t){t.error?alert(t.message):(e.listLabel="Local audio list:",e.mediaList=[],e.mediaListMessage=t.message,e.loaded=!1)});t.on("partial_success",function(t){t.data&&t.data.object&&e.mediaList.push(t.data.object),e.mediaListMessage=t.message}),t.on("all_success",function(t){e.sync_success=!0,e.mediaListMessage="All media are synced! Refresh audio list...",e._load_media.fire()}),t.on("disconnect",function(t){e.sync_success||(e.mediaListMessage="Something wrong, refresh page and try again.")})}}]),e}())||a);Reflect.defineMetadata("design:paramtypes",[c.MediaService,l.UserService,p.SocketService,v.LoadMedia,h.PlayMedia],m)},391:/*!******************************************************************!*\
  !*** ./public/frontend-app/components/media/media.template.html ***!
  \******************************************************************/
function(e,t){e.exports='<md-sidenav-layout style="height: 100%;">\n\t<md-sidenav opened="true" mode="side" align="start" class="padding">\n\t\t<sidenav\n\t\t\t\t[(currentUser)]="currentUser"\n\t\t\t\t(onSaveNewUser)="onSaveNewUser($event)"\n\t\t\t\t(onLogInUser)="onLogInUser($event)"\n\t\t\t\t(onVkAuth)="onVkAuth()"\n\t\t\t\t(onSyncAudio)="onSyncAudio()"\n\t\t\t\t(onUploadMedia)="onUploadMedia()"\n\t\t\t\t[message]="sideNavMessage"\n\t\t\t\t[allowToCreateFirstUser]="users && users.length ? false : true">\n\t\t</sidenav>\n\t</md-sidenav>\n\n\t<audio-player [audio]="currentMedia" (onEnded)="nextMedia()"></audio-player>\n\n\t<md-progress-bar *ngIf="!loaded" mode="indeterminate"></md-progress-bar>\n\n\t<media-list class="padding" [(list)]="mediaList" [(currentMedia)]="currentMedia" [message]="mediaListMessage" (mediaSelect)="mediaSelected($event)" (onLoadList)="mediaListLoaded($event)"></media-list>\n</md-sidenav-layout>\n\n'},392:/*!********************************************************!*\
  !*** ./public/frontend-app/services/socket.service.js ***!
  \********************************************************/
function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SocketService=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(/*! socket.io-client */393),u=i(a);n(/*! rxjs/Observable */12),t.SocketService=function(){function e(){r(this,e),this.host=window.location.protocol+"//"+window.location.hostname+":"+window.location.port}return o(e,[{key:"get",value:function(e,t){var n=this;this.name=e;var i=this.host+"/"+this.name;return this.socket=u.connect(i),this.socket.on("connect",function(){return n.connect(t)}),this.socket.on("disconnect",function(){return n.disconnect()}),this.socket.on("error",function(e){console.log('ERROR: "'+e+'" ('+i+")")}),this.socket}},{key:"connect",value:function(e){console.log('Connected to "'+(this.host+"/"+this.name)+'"'),this.socket.emit("start"),this.socket.on("start_response",e)}},{key:"disconnect",value:function(){console.log('Disconnected from "'+this.name+'"')}}]),e}()},430:/*!********************!*\
  !*** ws (ignored) ***!
  \********************/
function(e,t){},441:/*!********************************************************!*\
  !*** ./public/frontend-app/broadcasters/load-media.js ***!
  \********************************************************/
function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.LoadMedia=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(/*! ./broadcaster */442),a=t.LoadMedia=function(){function e(t){i(this,e),this._broadcaster=t}return r(e,[{key:"fire",value:function(e,t){this._broadcaster.broadcast("LoadMedia",e,t)}},{key:"on",value:function(){return this._broadcaster.on("LoadMedia")}}]),e}();Reflect.defineMetadata("design:paramtypes",[o.Broadcaster],a)},442:/*!*********************************************************!*\
  !*** ./public/frontend-app/broadcasters/broadcaster.js ***!
  \*********************************************************/
function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Broadcaster=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(/*! rxjs/Subject */11);n(/*! rxjs/Observable */12);n(/*! rxjs/add/operator/filter */195),n(/*! rxjs/add/operator/map */225);t.Broadcaster=function(){function e(){i(this,e),this._eventBus=this._eventBus,this._eventBus=new o.Subject}return r(e,[{key:"broadcast",value:function(e,t){this._eventBus.next({key:e,data:t})}},{key:"on",value:function(e){return this._eventBus.asObservable().filter(function(t){return t.key===e}).map(function(e){return e.data})}}]),e}()},443:/*!********************************************************!*\
  !*** ./public/frontend-app/broadcasters/play-media.js ***!
  \********************************************************/
function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PlayMedia=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(/*! ./broadcaster */442),a=t.PlayMedia=function(){function e(t){i(this,e),this._broadcaster=t}return r(e,[{key:"fire",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];this._broadcaster.broadcast("PlayMedia",e)}},{key:"on",value:function(){return this._broadcaster.on("PlayMedia")}}]),e}();Reflect.defineMetadata("design:paramtypes",[o.Broadcaster],a)},466:/*!******************************************************************!*\
  !*** ./public/frontend-app/directives/prevent-href.directive.js ***!
  \******************************************************************/
function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PreventHref=void 0;var r,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(/*! @angular/core */10);t.PreventHref=(r=(0,u.Component)({selector:"[href]",host:{"(click)":"preventDefault($event)"},template:"<ng-content></ng-content>",inputs:["href"]}),r(o=function(){function e(){i(this,e)}return a(e,[{key:"preventDefault",value:function(e){0==this.href.length&&e.preventDefault()}}]),e}())||o)},467:/*!******************************************************************!*\
  !*** ./public/frontend-app/directives/audio-player.directive.js ***!
  \******************************************************************/
function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayer=void 0;var u,s,c,l,d,f,p,v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=n(/*! @angular/core */10),m=n(/*! ./audio-player.template.html */468),b=i(m),y=n(/*! videogular2/core */382),g=(n(/*! ../models/media.model */365),n(/*! ../helpers/common */469)),_=n(/*! ../broadcasters/play-media */443),M=t.AudioPlayer=(u=(0,h.Component)({selector:"audio-player",template:b["default"]}),s=(0,h.Input)(),c=(0,h.Output)(),u((d=function(){function e(t,n){var i=this;o(this,e),r(this,"audio",f,this),r(this,"onEnded",p,this),this.isFirst=!0,this._vg_api=t,this._play_media=n,this._play_media.on().subscribe(function(e){setTimeout(function(){i._vg_api.getDefaultMedia().elem.load(),i._vg_api.play()}.bind(i),300)})}return v(e,[{key:"ngOnInit",value:function(){console.log("audio init",this.audio)}},{key:"ngOnChanges",value:function(e){this.audio&&this._vg_api.getDefaultMedia().elem.load()}},{key:"onPlayerReady",value:function(){var e=this;this._vg_api.subscriptions.ended._subscribe(g.CommonHelper.handleEmitter(function(t){e.onEnded.emit(e.audio)}))}},{key:"onEnterCuePoint",value:function(){console.log("onEnterCuePoint")}},{key:"onExitCuePoint",value:function(){console.log("onExitCuePoint")}},{key:"onComplete",value:function(){console.log("onComplete")}}]),e}(),f=a(d.prototype,"audio",[s],{enumerable:!0,initializer:function(){return this.audio}}),p=a(d.prototype,"onEnded",[c],{enumerable:!0,initializer:function(){return new h.EventEmitter}}),l=d))||l);Reflect.defineMetadata("design:paramtypes",[y.VgAPI,_.PlayMedia],M)},468:/*!*******************************************************************!*\
  !*** ./public/frontend-app/directives/audio-player.template.html ***!
  \*******************************************************************/
function(e,t){e.exports='<vg-player (onPlayerReady)="onPlayerReady($event)" style="height: 50px;">\n\t<vg-controls>\n\t\t<vg-play-pause></vg-play-pause>\n\t\t<vg-playback-button></vg-playback-button>\n\n\t\t<vg-time-display property="current" format="mm:ss"></vg-time-display>\n\n\t\t<vg-scrub-bar>\n\t\t\t<vg-scrub-bar-current-time></vg-scrub-bar-current-time>\n\t\t\t<vg-scrub-bar-buffering-time></vg-scrub-bar-buffering-time>\n\t\t</vg-scrub-bar>\n\n\t\t<vg-time-display property="left" format="mm:ss"></vg-time-display>\n\t\t<vg-time-display property="total" format="mm:ss"></vg-time-display>\n\n\t\t<vg-mute></vg-mute>\n\n\t\t<vg-volume></vg-volume>\n\t</vg-controls>\n\n\t<audio vg-media id="myAudio" preload="auto">\n\t\t<source [src]="audio.path || audio.remote_url" [type]="audio.type" *ngIf="audio">\n\t</audio>\n\t<!--<vg-media (onComplete)="onComplete($event)"></vg-media>-->\n</vg-player>'},469:/*!***********************************************!*\
  !*** ./public/frontend-app/helpers/common.js ***!
  \***********************************************/
function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.CommonHelper=function(){function e(){n(this,e)}return i(e,null,[{key:"handleEmitter",value:function(e,t){return{add:t||function(){},next:e}}}]),e}()},470:/*!********************************************!*\
  !*** ./public/frontend-app/pipes/index.js ***!
  \********************************************/
function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(/*! ./trim/trim.pipe */471);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},471:/*!*****************************************************!*\
  !*** ./public/frontend-app/pipes/trim/trim.pipe.js ***!
  \*****************************************************/
function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TrimPipe=void 0;var r,o,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(/*! @angular/core */10);t.TrimPipe=(r=(0,u.Pipe)({name:"trim"}),r(o=function(){function e(){i(this,e)}return a(e,[{key:"transform",value:function(e,t){return e.trim()}}]),e}())||o)},472:/*!******************************************************!*\
  !*** ./public/frontend-app/components/app.routes.js ***!
  \******************************************************/
function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.routes=void 0;var i=n(/*! ./media/media.component */381);t.routes=[{path:"",component:i.MediaComponent,pathMatch:"full"}]},473:/*!*******************!*\
  !*** ./config.js ***!
  \*******************/
function(e,t,n){(function(t,i){"use strict";var r=t,o="/media/",a={media_options:{relative_path:o,absolute_path:r+"/public"+o},vk_api_options:{app_id:5638380,app_secret:i.env.VK_APP_SECRET,redirect_uri:"http://media.jonybang.ru/api/vk_callback_auth",scope:"audio,offline"},permissions:{vkUsersIds:[11204355,179126482,182778898,1935590,18365571]},multer_options:{dest:"./public/"+o+"temp/"}};e.exports.data=a,e.exports.setLocals=function(e){var t=n(/*! lodash */362);t.extend(e.locals,a)}}).call(t,"/",n(/*! ./~/process/browser.js */2))},474:/*!****************************************************************!*\
  !*** ./public/frontend-app/directives/media-list.directive.js ***!
  \****************************************************************/
function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,i){return i(e,t,n)||n},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(t,"__esModule",{value:!0}),t.MediaList=void 0;var u,s,c,l,d,f,p,v,h,m,b,y,g,M,k,w,j=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=n(/*! @angular/core */10),P=n(/*! ./media-list.template.html */475),U=i(P),C=n(/*! ../services/media.service */364),E=n(/*! ../broadcasters/load-media */441),L=(n(/*! ../models/media.model */365),t.MediaList=(u=(0,O.Component)({selector:"media-list",template:U["default"]}),s=(0,O.Output)(),c=(0,O.Output)(),l=(0,O.Input)(),d=(0,O.Input)(),f=(0,O.Output)(),p=(0,O.Output)(),v=(0,O.Input)(),u((m=function(){function e(t,n){var i=this;o(this,e),r(this,"onChangeCurrent",b,this),r(this,"onLoadList",y,this),r(this,"list",g,this),r(this,"message",M,this),r(this,"mediaSelect",k,this),r(this,"currentMediaChange",w,this),this._currentMedia=this._currentMedia,this._media_service=t,this._load_media=n,this.zone=new O.NgZone({enableLongStackTrace:!1}),this._load_media.on().subscribe(function(e,t){i.loadUserMedia(t)})}return j(e,[{key:"selectMedia",value:function(e){this.currentMedia=e,this.mediaSelect.emit(e)}},{key:"currentMedia",get:function(){return this._currentMedia},set:function(e){this._currentMedia=e,this.currentMediaChange.emit(e)}}]),j(e,[{key:"ngOnInit",value:function(){this.loadUserMedia()}},{key:"loadUserMedia",value:function(e){function t(e){var t=this;this.zone.run(function(){n.bind(t)([]),t.message=_.has(e,"_body")?e._body:e})}function n(t){this.list=t,t.length>0&&(this.currentMedia=t[0]),this.loaded=!0,this.onLoadList.emit(t),e&&e(t)}var i=this;this.loaded=!1,this._media_service.query().then(function(e){e.length?(i.message="Local audio list:",n.bind(i)(e)):(i.message="No media :(",i.loaded=!0,n.bind(i)([]))},t.bind(this))}}]),e}(),b=a(m.prototype,"onChangeCurrent",[s],{enumerable:!0,initializer:function(){return new O.EventEmitter}}),y=a(m.prototype,"onLoadList",[c],{enumerable:!0,initializer:function(){return new O.EventEmitter}}),g=a(m.prototype,"list",[l],{enumerable:!0,initializer:function(){return this.list}}),M=a(m.prototype,"message",[d],{enumerable:!0,initializer:function(){return this.message}}),k=a(m.prototype,"mediaSelect",[f],{enumerable:!0,initializer:function(){return new O.EventEmitter}}),w=a(m.prototype,"currentMediaChange",[p],{enumerable:!0,initializer:function(){return new O.EventEmitter}}),a(m.prototype,"currentMedia",[v],Object.getOwnPropertyDescriptor(m.prototype,"currentMedia"),m.prototype),h=m))||h));Reflect.defineMetadata("design:paramtypes",[C.MediaService,E.LoadMedia],L)},475:/*!*****************************************************************!*\
  !*** ./public/frontend-app/directives/media-list.template.html ***!
  \*****************************************************************/
function(e,t){e.exports='<div>\n\t<h3>{{listLabel || \'Audio list:\'}}</h3>\n\t<p [hidden]="loaded && list && list.length">{{message || \'No media :( You are logged in?\'}}</p>\n\t<ul>\n\t\t<li *ngFor="let audio of list" [ngClass]="{\'bold\': audio == currentMedia}"><a href (click)="selectMedia(audio)">{{audio.artist}} - {{audio.title}}</a></li>\n\t</ul>\n</div>'}});
//# sourceMappingURL=scripts.min.js.map